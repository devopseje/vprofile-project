pipeline {
       agent any
       tools {
        maven 'Maven3'
       }

       environment {
          SNAP_REPO = 'eje-vprofile-snapshot'
          NEXUS_USER = 'admin'
          NEXUS_PASS = 'Mastereje5'
          RELEASE_REPO = 'eje-vprofile-release'  
          CENTRAL_REPO = 'eje-vpro-maven-central'
          NEXUSIP = '172.31.43.164'
          NEXUSPORT = '8081'
          NEXUS_GRP_REPO = 'eje-vprofile-group'
         
            
       }


       stages {
            stage('build') {
               steps{
                    sh 'mvn clean -s settings.xml -DskipTests=true install'
               }
               post {
                    success {
                         echo 'Archiving .war datei'
                         archiveArtifacts artifacts: '**/*.war'
                    }
               }
               
            }

            stage('Test') {
               steps {
                    sh 'mvn test'
               }
            }
            stage('Checkstyle Analalyse') {
                    steps {
                         sh 'mvn checkstyle:checkstyle'
                    }
            }
          }
       }
     
       
